(function(t){function e(e){for(var a,o,i=e[0],c=e[1],u=e[2],d=0,f=[];d<i.length;d++)o=i[d],r[o]&&f.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"11ca":function(t,e,n){t.exports=n.p+"img/eraser.a56ae969.svg"},3000:function(t,e,n){"use strict";var a=n("af8a"),r=n.n(a);r.a},"33bf":function(t,e,n){t.exports=n.p+"img/pencil.a04ebb97.svg"},"53e2":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app",attrs:{id:"app"}},[t.isStart?n("Start"):t.isGame?n("Game"):t.isResult?n("Result"):t._e()],1)},s=[],o=n("cebc"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("NavBar",[t._v("PictoPhone")]),a("main",[a("div"),a("div",{staticClass:"players"},[t._v("\n            Number of passes\n            "),a("h3",[t._v(t._s(t.$store.state.playerCount))]),a("div",{staticClass:"controls"},[a("el-button",{attrs:{circle:""},on:{click:function(e){e.preventDefault(),t.$store.state.playerCount++}}},[a("img",{attrs:{src:n("8a37")}})]),a("el-button",{attrs:{circle:""},on:{click:function(e){return e.preventDefault(),function(){t.$store.state.playerCount>2&&t.$store.state.playerCount--}()}}},[a("img",{attrs:{src:n("e9b2")}})])],1)]),a("div",{staticClass:"start"},[a("el-button",{attrs:{type:"success"},on:{click:function(e){return e.preventDefault(),t.start(e)}}},[t._v("Start")])],1)])],1)},c=[],u=n("2f62"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("div",{staticClass:"before"},[t._t("before")],2),n("div",{staticClass:"main"},[t._t("default")],2),n("div",{staticClass:"after"},[t._t("after")],2)])},d=[],f={props:{},components:{},data:function(){return{}},methods:Object(o["a"])({},Object(u["b"])([])),computed:Object(o["a"])({},Object(u["c"])([]))},g=f,h=(n("d188"),n("2877")),m=Object(h["a"])(g,l,d,!1,null,"350b574c",null),p=m.exports,v={components:{NavBar:p},computed:Object(o["a"])({},Object(u["c"])([])),methods:Object(o["a"])({},Object(u["b"])(["addWord","game"]),{start:function(){var t=this;this.$prompt("","Choose a starting word",{confirmButtonText:"OK",cancelButtonText:"Cancel"}).then(function(e){var n=e.value,a=e.action;n&&"confirm"===a&&(t.addWord(n),t.game())})}})},b=v,w=(n("70fe"),Object(h["a"])(b,i,c,!1,null,"3b165aa3",null)),O=w.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("NavBar",[t.drawing?n("span",[t._v(t._s(t.lastWord))]):n("span",[t._v("What is this?")]),n("template",{slot:"after"},[t.drawing?n("el-button",{attrs:{type:"primary"},on:{click:t.done}},[t._v("Done")]):n("el-button",{attrs:{type:"primary"},on:{click:t.guess}},[t._v("Guess")])],1)],2),n("Draw",{ref:"drawing",attrs:{editable:t.drawing,segments:t.current},on:{"update:segments":function(e){t.current=e}}})],1)},_=[],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{ref:"board"},[t.editable?a("div",{staticClass:"tools"},[a("el-button",{class:{active:1===t.tool},attrs:{circle:""},on:{click:function(e){t.tool=1}}},[a("img",{attrs:{src:n("33bf")}})]),a("el-button",{class:{active:0===t.tool},attrs:{circle:""},on:{click:function(e){t.tool=0}}},[a("img",{attrs:{src:n("11ca")}})]),a("el-button",{attrs:{circle:""},on:{click:t.clear}},[a("img",{attrs:{src:n("c637")}})])],1):t._e(),a("canvas",{directives:[{name:"touch",rawName:"v-touch:start",value:t.startDrag,expression:"startDrag",arg:"start"},{name:"touch",rawName:"v-touch:end",value:t.endDrag,expression:"endDrag",arg:"end"},{name:"touch",rawName:"v-touch:moving",value:t.addMove,expression:"addMove",arg:"moving"}],ref:"canvas",attrs:{height:t.height}})])},j=[],C=(n("ac6a"),n("11ca"),n("33bf"),n("c637"),{components:{},props:{editable:Boolean},data:function(){return{segments:[],dragging:!1,tool:1,height:0}},actions:Object(o["a"])({},Object(u["b"])([])),computed:Object(o["a"])({},Object(u["c"])([])),mounted:function(){var t=this;this.$refs.canvas.width=this.$refs.board.offsetWidth,this.height=this.$refs.board.clientHeight,this.redraw(),this.$refs.canvas.addEventListener("touchmove",function(t){return t.preventDefault()},{passive:!1}),window.onresize=function(e){t.$refs.canvas.width=t.$refs.board.offsetWidth,t.height=t.$refs.board.clientHeight,t.redraw()}},methods:{startDrag:function(t){this.editable&&(this.dragging=!0,this.segments.push({lines:[],tool:this.tool}),this.addMove(t))},addMove:function(t){if(this.dragging){var e=(t.touches?t.touches[0].clientX:t.x)-t.target.getBoundingClientRect().left,n=(t.touches?t.touches[0].clientY:t.y)-t.target.getBoundingClientRect().top;this.segments[this.segments.length-1].lines.push({x:e,y:n})}this.redraw()},endDrag:function(){this.dragging=!1,this.redraw()},clear:function(){this.segments=[],this.redraw()},getSegments:function(){return this.segments},getImage:function(){var t,e,n,a=this.$refs.canvas,r=a.getContext("2d"),s=document.createElement("canvas").getContext("2d"),o=r.getImageData(0,0,a.width,a.height),i=o.data.length,c={top:null,left:null,right:null,bottom:null};for(t=0;t<i;t+=4)0!==o.data[t+3]&&(e=t/4%a.width,n=~~(t/4/a.width),null===c.top&&(c.top=n),null===c.left?c.left=e:e<c.left&&(c.left=e),null===c.right?c.right=e:c.right<e&&(c.right=e),null===c.bottom?c.bottom=n:c.bottom<n&&(c.bottom=n));var u=10;c.top=Math.max(0,c.top-u),c.left=Math.max(0,c.left-u),c.right+=u,c.bottom+=u;var l=c.bottom-c.top,d=c.right-c.left,f=r.getImageData(c.left,c.top,d,l);return s.canvas.width=d,s.canvas.height=l,s.putImageData(f,0,0),s.canvas.toDataURL("image/png")},redraw:function(){var t=this.$refs.canvas.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height),t.lineJoin="round",t.lineCap="round",this.segments.forEach(function(e){if(t.beginPath(),0===e.tool?(t.strokeStyle="#fff",t.lineWidth=30):(t.strokeStyle="#000",t.lineWidth=2),e.lines.length>0){var n=e.lines[0],a=n.x,r=n.y;t.moveTo(a,r)}e.lines.forEach(function(e,n){var a=e.x,r=e.y;t.lineTo(a,r)}),t.stroke()})}}}),S=C,$=(n("3000"),Object(h["a"])(S,x,j,!1,null,"594ed647",null)),D=$.exports,k={components:{Draw:D,NavBar:p},data:function(){return{drawing:!0,current:[]}},computed:Object(o["a"])({},Object(u["c"])(["lastWord","isFinished"])),methods:Object(o["a"])({},Object(u["b"])(["addWord","addImage","nextStage","result"]),{done:function(){var t=this.$refs.drawing.getSegments();0!==t.length?(this.nextStage(),this.addImage(this.$refs.drawing.getImage()),this.isFinished?this.result():this.drawing=!1):this.$message({message:"You have to draw something! :(",type:"error"})},guess:function(){var t=this;this.$prompt("","What's your guess?",{confirmButtonText:"OK",cancelButtonText:"Cancel"}).then(function(e){var n=e.value,a=e.action;n&&"confirm"===a&&(t.$refs.drawing.clear(),t.addWord(n),t.nextStage(),t.isFinished?t.result():t.drawing=!0)})}})},W=k,B=Object(h["a"])(W,y,_,!1,null,"0696bd72",null),E=B.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("NavBar",[n("template",{slot:"before"},[n("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("Save")])],1),t._v("\n        Result\n        "),n("template",{slot:"after"},[n("el-button",{attrs:{type:"success"},on:{click:t.start}},[t._v("Play Again")])],1)],2),n("div",{ref:"result",staticClass:"results"},[t._l(t.result,function(e,a){return[a%2===0?n("span",[t._v(t._s(e))]):n("img",{attrs:{src:e}})]})],2)],1)},I=[],M=n("c0e9"),N=n.n(M),P={props:{},components:{NavBar:p},data:function(){return{}},methods:Object(o["a"])({},Object(u["b"])(["start"]),{save:function(){N()(this.$refs.results).then(function(t,e){console.log(t,e);var n=document.createElement("a");n.download="masterpiece_"+(new Date).getTime()+".png",n.href=t.toDataURL("image/png"),n.click()})}}),computed:Object(o["a"])({},Object(u["c"])(["result"]))},T=P,G=(n("76c4"),Object(h["a"])(T,R,I,!1,null,"4203b114",null)),F=G.exports,Y={components:{Result:F,Game:E,Start:O},computed:Object(o["a"])({},Object(u["c"])(["isStart","isGame","isResult"])),created:function(){window.onbeforeunload=function(){return"Yo, are you sure? You'll lose all progress!"}}},J=Y,L=(n("5c0b"),Object(h["a"])(J,r,s,!1,null,null,null)),H=L.exports,K=n("8c4f");a["default"].use(K["a"]);var U=new K["a"]({routes:[{path:"/",name:"start",component:O},{path:"/game",name:"game",component:E}]}),z=n("75fc");a["default"].use(u["a"]);var A=new u["a"].Store({state:{playerCount:5,timer:0,stage:0,drawings:[],images:[],status:0,words:[]},getters:{lastWord:function(t){return 0===t.words.length?null:t.words[t.words.length-1]},isFinished:function(t){return t.stage>=t.playerCount-1},isStart:function(t){return 0===t.status},isGame:function(t){return 1===t.status},isResult:function(t){return 2===t.status},result:function(t){return t.words.length<=0?[]:t.words.map(function(e,n){var a=[e],r=t.images[n];return r&&a.push(r),a}).reduce(function(t,e){return t.concat(e)})}},mutations:{addImage:function(t,e){t.images=[].concat(Object(z["a"])(t.images),[e])},addWord:function(t,e){t.words=[].concat(Object(z["a"])(t.words),[e])},nextStage:function(t){t.stage=t.stage+1},setStatus:function(t,e){t.status=e},reset:function(t){t.stage=0,t.images=[],t.status=0,t.words=[]}},actions:{addImage:function(t,e){var n=t.commit;n("addImage",e)},addWord:function(t,e){var n=t.commit;n("addWord",e)},nextStage:function(t){var e=t.commit;e("nextStage")},start:function(t){var e=t.commit;e("setStatus",0),e("reset")},game:function(t){var e=t.commit;e("setStatus",1)},result:function(t){var e=t.commit;e("setStatus",2)}}}),X=n("0086"),q=n.n(X),Q=n("5c96"),V=n.n(Q);n("0fae");a["default"].use(V.a),a["default"].use(q.a),a["default"].config.productionTip=!1,new a["default"]({router:U,store:A,render:function(t){return t(H)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("5e27"),r=n.n(a);r.a},"5e27":function(t,e,n){},"70fe":function(t,e,n){"use strict";var a=n("b3ba"),r=n.n(a);r.a},"76c4":function(t,e,n){"use strict";var a=n("95a1"),r=n.n(a);r.a},"8a37":function(t,e,n){t.exports=n.p+"img/plus.c5645235.svg"},"95a1":function(t,e,n){},af8a:function(t,e,n){},b3ba:function(t,e,n){},c637:function(t,e,n){t.exports=n.p+"img/trash.766c2428.svg"},d188:function(t,e,n){"use strict";var a=n("53e2"),r=n.n(a);r.a},e9b2:function(t,e,n){t.exports=n.p+"img/minus.629cb54b.svg"}});
//# sourceMappingURL=app.779f6f2a.js.map